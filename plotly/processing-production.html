<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aggregate Flows</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>

  <div class="container pt-4">
    <h4>Sankey</h4>
    <div id="sankey"></div>

    <h4>Flows</h4>
    <table class="table" hidden>
      <thead>
        <tr>
          <th>from</th>
          <th>to</th>
          <th>value</th>
          <th>material</th>
        </tr>
      </thead>
      <tbody>
        <tr>
            <td>Manufacturing</td>
            <td>Manufacturing gravel</td>
            <td>7250.20236912901</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Manufacturing</td>
            <td>Manufacturing rock</td>
            <td>7522.21751961105</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Manufacturing</td>
            <td>Manufacturing sand</td>
            <td>18044.2342207864</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Manufacturing gravel</td>
            <td>Commercial buildings</td>
            <td>2416.73421610916</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Manufacturing gravel</td>
            <td>Residential buildings</td>
            <td>2416.73405210213</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Manufacturing gravel</td>
            <td>Social buildings</td>
            <td>2416.73410091772</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Manufacturing rock</td>
            <td>Commercial buildings</td>
            <td>2507.40583064037</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Manufacturing rock</td>
            <td>Residential buildings</td>
            <td>2507.405893877</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Manufacturing rock</td>
            <td>Social buildings</td>
            <td>2507.40579509368</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Manufacturing sand</td>
            <td>Commercial buildings</td>
            <td>6069.31772180661</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Manufacturing sand</td>
            <td>Residential buildings</td>
            <td>5992.90821972672</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Manufacturing sand</td>
            <td>Social buildings</td>
            <td>5982.00827925305</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Waste management gravel</td>
            <td>913.446860573776</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Waste management rock</td>
            <td>1004.11399555649</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Waste management sand</td>
            <td>4566.03061465229</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Waste management gravel</td>
            <td>913.446860573776</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Waste management rock</td>
            <td>1004.11399555649</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Waste management sand</td>
            <td>4489.62948950248</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Waste management gravel</td>
            <td>913.446860573776</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Waste management rock</td>
            <td>1004.11399555649</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Waste management sand</td>
            <td>4478.71580453943</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Waste management gravel</td>
            <td>Waste management</td>
            <td>2740.34035884593</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Waste management rock</td>
            <td>Waste management</td>
            <td>3012.34196364591</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Waste management sand</td>
            <td>Waste management</td>
            <td>13534.3759086942</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Stock gravel</td>
            <td>1503.9495065462</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Stock rock</td>
            <td>1503.94999712657</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Commercial buildings</td>
            <td>Stock sand</td>
            <td>1503.9475781338</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Stock gravel</td>
            <td>1503.9495065462</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Stock rock</td>
            <td>1503.94999712657</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Residential buildings</td>
            <td>Stock sand</td>
            <td>1503.9475781338</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Stock gravel</td>
            <td>1503.9495065462</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Stock rock</td>
            <td>1503.94999712657</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Social buildings</td>
            <td>Stock sand</td>
            <td>1503.9475781338</td>
            <td>sand</td>
        </tr>
        <tr>
            <td>Stock gravel</td>
            <td>Stock</td>
            <td>4511.84846332198</td>
            <td>gravel</td>
        </tr>
        <tr>
            <td>Stock rock</td>
            <td>Stock</td>
            <td>4511.85004380189</td>
            <td>rock</td>
        </tr>
        <tr>
            <td>Stock sand</td>
            <td>Stock</td>
            <td>4511.84266485425</td>
            <td>sand</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src='https://cdn.plot.ly/plotly-2.14.0.min.js'></script>

  <script>
    var data = [{
      type: "sankey",
      // arrangement: "perpendicular",
      arrangement: "snap",
      valuesuffix: "kt",
      valueformat: ",",
      node: {
        label: ["Secondary Aggregates", "Marine Dredged Outside English Waters", "Scalpings and Fines", "Demolition", "Extraction Sand", "Extraction Gravel", "Extraction Crushed Rock", "Extraction", "Processing/Production", "Processing/Production Sand", "Processing/Production Secondary Aggregates", "Processing/Production C&D Waste", "Processing/Production Recycled Waste", "Processing/Production Gravel", "Processing/Production Crushed Rock", "Fill Sand", "Fill Gravel", "Fill Crushed Rock", "Land Won", "Marine Dredged", "Concreting Manufacturing", "Asphalt Manufacturing", "Mortar Manufacturing", "Aggregate Use", "Non-aggregate Use", "Use as Fill", "Trade", "Stock"],
        color: ["#ececec","#ececec","#ececec","#ececec","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#cece65","#ececec","#ececec","#ececec","#6e6870","#c67c4b","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#ececec","#ececec","#ececec","#ececec","#ececec","#ececec","#ececec"],
        pad: 8,
        thickness: 0,
        line: {
          width: 0,
        },
      },
      link: {
        source: [0,1,1,2,3,4,5,6,7,7,7,8,8,8,8,8,8,9,10,11,12,13,14,9,10,11,12,13,14,9,10,11,12,9,13,14,10,12,11,9,13,14,10,12,11,9,13,11,11,14,11,15,16,17,9,13,14,10,12,11,9,13,9,13,18,19,9,13,14,10,12,11,8],
        target: [8,8,8,8,8,8,8,8,4,5,6,9,13,14,12,10,11,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,15,16,15,16,17,17,25,25,25,2,2,2,2,2,2,18,18,19,19,26,26,27,27,27,27,27,27,27],
        value: [100,100,100,100,100,100,100,100,100,100,100,1000,900,700,700,700,1000,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],
        color: ["#ececec","#cece65","#6e6870","#ececec","#ececec","#cece65","#6e6870","#c67c4b","#cece65","#6e6870","#c67c4b","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#cece65","#ececec","#ececec","#ececec","#6e6870","#c67c4b","#cece65","#ececec","#ececec","#ececec","#6e6870","#c67c4b","#cece65","#ececec","#ececec","#ececec","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#cece65","#6e6870","#ececec","#ececec","#c67c4b","#ececec","#cece65","#6e6870","#c67c4b","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#cece65","#6e6870","#cece65","#6e6870","#ececec","#ececec","#cece65","#6e6870","#c67c4b","#ececec","#ececec","#ececec","#ececec"],
        arrowlen: 10,
      }
    }]

    var layout = {
        title: 'Processing / Production',
        height: 800,
    };

    var config = {
      toImageButtonOptions: {
        format: 'svg', // one of png, svg, jpeg, webp
        filename: 'processing-production',
        height: 1000,
        width: 1000,
        scale: 1 // Multiply title/legend/axis/canvas sizes by this factor
      }
    };

    Plotly.newPlot('sankey', data, layout, config)
  </script>
</body>
</html>