<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aggregate Flows</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>

  <div class="container pt-4">
    <h4>Sankey</h4>
    <div id="sankey"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src='https://cdn.plot.ly/plotly-2.14.0.min.js'></script>

  <script>
    var data = [{
      type: "sankey",
      arrangement: "perpendicular",
      // arrangement: "snap",
      valuesuffix: "kt",
      valueformat: ",",
      node: {
        label: ["Secondary Aggregates","Marine Dredged Outside English Waters","Scalpings and Fines","Demolition","Extraction Sand","Extraction Gravel","Extraction Crushed Rock","Extraction","Processing/Production","Processing/Production Sand","Processing/Production Secondary Aggregates","Processing/Production C&D Waste","Processing/Production Recycled Waste","Processing/Production Gravel","Processing/Production Crushed Rock","Fill Sand","Fill Gravel","Fill Crushed Rock","Land Won","Marine Dredged","Concreting Manufacturing","Asphalt Manufacturing","Mortar Manufacturing","Aggregate Use","Non-aggregate Use","Use as Fill","Trade","Stock","Overburden and Interburden"],
        color: ["#a5d7d4","#08059a","#b23434","#b23434","#d7e60a","#f0a316","#aca9a3","#cbbebe","#cbbebe","#d7e60a","#a5d7d4","#b23434","#02aa02","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#5d1212","#08059a","#b32eb3","#b32eb3","#d7e60a","#b32eb3","#b32eb3","#b32eb3","#cbbebe","#cbbebe","#b23434"],
        pad: 8,
        thickness: 0,
        line: {
          width: 0,
        },
      },
      link: {
        source: [0,1,1,2,3,4,5,6,4,5,6,4,5,6,7,7,7,8,8,8,8,8,8,9,10,11,12,13,14,9,10,11,12,13,14,9,10,11,12,9,13,14,10,12,11,9,13,14,10,12,11,9,13,11,11,14,11,15,16,17,9,13,14,10,12,11,9,13,9,13,18,19,9,13,14,10,12,11,8,],
        target: [8,8,8,8,8,8,8,8,28,28,28,15,16,17,4,5,6,9,13,14,12,10,11,20,20,20,20,20,20,21,21,21,21,21,21,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,15,16,15,16,17,17,25,25,25,2,2,2,2,2,2,18,18,19,19,26,26,27,27,27,27,27,27,27],
        value: [5175,597,0,6900,33690,16327,24106,84122,1159,1659,6637,1380,2047,9814,19463,27812,100573,26304,20777,38612,0,1293,28770,13711,0,11825,0,8252,8783,373,0,1097,0,238,3019,3822,239,1569,0,2494,4297,14046,725,0,7572,760,1667,5728,0,0,2865,1991,3349,1036,1410,4059,0,3027,4759,4059,399,981,2977,329,0,1396,1377,1993,1377,0,3370,1377,0,0,0,0,0,0,0],
        color: ["#a5d7d4","#d7e60a","#f0a316","#a5d7d4","#a5d7d4","#d7e60a","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#a5d7d4","#a5d7d4","#a5d7d4","#d7e60a","#a5d7d4","#a5d7d4","#a5d7d4","#f0a316","#aca9a3","#d7e60a","#a5d7d4","#a5d7d4","#a5d7d4","#f0a316","#aca9a3","#d7e60a","#a5d7d4","#a5d7d4","#a5d7d4","#d7e60a","#f0a316","#aca9a3","#a5d7d4","#a5d7d4","#a5d7d4","#d7e60a","#f0a316","#aca9a3","#a5d7d4","#a5d7d4","#a5d7d4","#d7e60a","#f0a316","#a5d7d4","#a5d7d4","#aca9a3","#a5d7d4","#d7e60a","#f0a316","#aca9a3","#d7e60a","#f0a316","#aca9a3","#a5d7d4","#a5d7d4","#a5d7d4","#d7e60a","#f0a316","#d7e60a","#f0a316","#666666","#666666","#d7e60a","#f0a316","#aca9a3","#a5d7d4","#a5d7d4","#a5d7d4","#666666"],
        arrowlen: 10,
      }
    }]

    var layout = {
        title: 'Processing / Production',
        height: 800,
    };

    var config = {
      toImageButtonOptions: {
        format: 'svg', // one of png, svg, jpeg, webp
        filename: 'processing-production',
        height: 1000,
        width: 1000,
        scale: 1 // Multiply title/legend/axis/canvas sizes by this factor
      }
    };

    Plotly.newPlot('sankey', data, layout, config)
  </script>
</body>
</html>