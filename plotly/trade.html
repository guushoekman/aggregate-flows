<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aggregate Flows</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>

  <div class="container pt-4">
    <h4>Sankey</h4>
    <div id="sankey"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src='https://cdn.plot.ly/plotly-2.14.0.min.js'></script>

  <script>
    var data = [{
      type: "sankey",
      arrangement: "perpendicular",
      // arrangement: "snap",
      valuesuffix: "kt",
      valueformat: ",",
      node: {
        label: ["Processing/Production","Land Won Sand","Land Won Gravel","Marine Dredged Sand","Marine Dredged Gravel","Crushed Rock","Concreting Sand","Concreting Gravel","Concreting Crushed Rock","Asphalt Sand","Asphalt Gravel","Asphalt Crushed Rock","Concrete Manufacturing","Asphalt Manufacturing","Mortar Manufacturing","Trade","Manufacturing"],
        color: ["#cbbebe","#d7e60a","#aca9a3","#d7e60a","#aca9a3","#53514f","#d7e60a","#aca9a3","#53514f","#d7e60a","#aca9a3","#53514f","#885252","#885252","#d7e60a","#cbbebe","#cbbebe"],
        pad: 8,
        thickness: 0,
        line: {
          width: 0,
        },
      },
      link: {
        source: [0,0,0,0,0,1,1,1,2,2,3,3,3,4,4,5,5,6,7,8,9,10,11,12,13,14,15,15,15,15,15],
        target: [15,15,15,15,15,6,9,14,7,10,6,9,14,7,10,8,11,12,12,12,13,13,13,16,16,16,1,2,5,3,4],
        value: [1377,1993,1377,0,206,0,0,0,473,0,0,0,0,0,0,6999,985,21235,14171,27038,0,0,10014,62444,10014,5630,1377,1993,206,1377,0],
        color: ["#d7e60a","#aca9a3","#d7e60a","#aca9a3","#53514f","#d7e60a","#d7e60a","#d7e60a","#aca9a3","#aca9a3","#d7e60a","#d7e60a","#d7e60a","#aca9a3","#aca9a3","#53514f","#53514f","#d7e60a","#aca9a3","#53514f","#d7e60a","#aca9a3","#53514f","#666666","#666666","#666666","#d7e60a","#aca9a3","#53514f","#d7e60a","#aca9a3",],
        arrowlen: 10,
      }
    }]

    var layout = {
        title: 'Trade',
        height: 800,
    };

    var config = {
      toImageButtonOptions: {
        format: 'svg', // one of png, svg, jpeg, webp
        filename: 'trade',
        height: 1000,
        width: 1000,
        scale: 1 // Multiply title/legend/axis/canvas sizes by this factor
      }
    };

    Plotly.newPlot('sankey', data, layout, config)
  </script>
</body>
</html>