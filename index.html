<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Aggregate Flows</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

  <style>
    svg {
      width: 100%;
      height: auto;
    }

    .node {
      cursor: pointer;
    }

    .node:hover {
      opacity: .8;
    }

    .flow.opaque {
      opacity: .1;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-light">
    <div class="container">
      <a class="navbar-brand" href="#">Aggregate flows</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>
  <div class="container pt-4">
    <svg viewBox="0 0 39.687 18.918" xmlns="http://www.w3.org/2000/svg">
     <rect width="5.2917" height="9.3662" fill="#a00"/>
     <rect x="5.2917" width="5.2917" height="7.8846" fill="#faa"/>
     <rect x="10.583" width="5.2917" height="7.8581" fill="#cd87de"/>
     <rect x="15.875" width="5.2917" height="18.918" fill="#f2f2f2"/>


     <!-- semi-manufacuring -->
     <rect x="21.167" width="5.2917" height="3.0163" fill="#5aa02c" class="node" data-name="sheet-and-plate"/>
     <rect x="21.167" y="3.0162" width="5.2917" height="1.6933" fill="#aade87" class="node" data-name="foil"/>
     <rect x="21.167" y="6.2442" width="5.2917" height="4.5773" fill="#3771c8" class="node" data-name="extrusion"/>
     <rect x="21.167" y="10.821" width="5.2917" height="1.5346" fill="#80b3ff" class="node" data-name="wire-and-cable"/>
     <rect x="21.167" y="12.356" width="5.2917" height="5.7415" fill="#de8787" class="node" data-name="shape-casting"/>

     <!-- manufacuring -->
     <rect x="34.396" width="5.2917" height="3.2015" fill="#afc6e9" class="node" data-name="man-bc"/>
     <rect x="34.396" y="3.2015" width="5.2917" height="2.0373" fill="#a40" class="node" data-name="man-tau"/>
     <rect x="34.396" y="5.2388" width="5.2917" height="2.3548" fill="#9c60af" class="node" data-name="man-eca"/>

     <rect x="34.396" y="7.5935" width="5.2917" height="2.4042" fill="#cda7d9" class="node" data-name="man-eot"/>
     <rect x="34.396" y="9.9978" width="5.2917" height="3.7154" fill="#4ea6a6"/>

     <rect x="26.458" width="7.9375" height=".44979" fill="#5aa02c" class="flow" data-from="sheet-and-plate" data-to="man-bc"/>

     <g fill="#5aa02c" class="flow" data-from="sheet-and-plate" data-to="man-eca">
      <rect x="26.458" y=".82021" width="1.3229" height="1.233"/>
      <rect transform="rotate(38.296)" x="22.312" y="-16.573" width="7.6554" height="1.1561" ry="0"/>
      <rect x="33.073" y="5.2388" width="1.3229" height="1.233"/>
     </g>

     <g fill="#5aa02c" class="flow" data-from="sheet-and-plate" data-to="man-eot">
      <rect x="26.458" y="2.0532" width=".8957" height=".96573"/>
      <rect x="33.5" y="7.5935" width=".8957" height=".96573"/>
      <rect transform="matrix(.75319 .6578 -.59798 .80151 0 0)" x="23.221" y="-16.496" width="8.8428" height=".86002"/>
     </g>

     <g fill="#5aa02c" class="flow" data-from="sheet-and-plate" data-to="man-tau">
      <rect x="26.458" y=".44979" width="1.3229" height=".37042"/>
      <path transform="matrix(.88732 .46116 -.22891 .97345 0 0)" x="28.005777" y="-12.805376" width="6.0503669" height="0.34094641" d="m28.006-12.805h6.0504v0.34095h-6.0504z" sodipodi:type="rect"/>
      <rect x="33.073" y="3.2015" width="1.3229" height=".37042"/>
     </g>

     <g fill="#aade87" class="flow" data-from="foil" data-to="man-tau">
      <rect x="26.458" y="3.0189" width=".44213" height=".52917"/>
      <rect transform="rotate(4.5091)" x="27.055" y=".89473" width="7.1165" height=".52429"/>
      <rect x="33.954" y="3.5719" width=".44213" height=".52917"/>
     </g>

     <g fill="#3771c8" class="flow" data-from="extrusion" data-to="man-bc">
      <rect x="26.458" y="6.2442" width="1.3229" height="1.3859"/>
      <rect transform="matrix(.70768 -.70653 .82167 .56996 0 0)" x="9.7385" y="24.073" width="9.0446" height="1.386"/>
      <rect x="33.073" y=".44979" width="1.3229" height="1.3859"/>
     </g>

     <g fill="#80b3ff" class="flow" data-from="wire-and-cable" data-to="man-bc">
      <rect x="26.458" y="10.821" width="1.3229" height=".54104"/>
      <rect transform="matrix(.55132 -.83429 .78836 .61522 0 0)" x="8.159" y="29.188" width="11.164" height=".34587"/>
      <rect x="33.633" y="1.8357" width=".76252" height=".54104"/>
     </g>

     <g fill="#de8787" class="flow" data-from="shape-casting" data-to="man-bc">
      <rect x="26.458" y="12.356" width="1.3229" height=".56376"/>
      <rect transform="matrix(.53241 -.84648 .79349 .60859 0 0)" x="6.6843" y="30.081" width="12.135" height=".44543"/>
      <rect transform="scale(-1,1)" x="-34.396" y="2.3768" width=".51293" height=".56376"/>
     </g>

     <rect x="21.167" y="18.098" width="5.2917" height=".26458" fill="#faa"/>
     <rect x="21.167" y="18.362" width="5.2917" height=".21167" fill="#ffb380"/>
     <rect x="21.167" y="18.574" width="5.2917" height=".34396" fill="#ac9393"/>
     <rect x="21.167" y="4.7096" width="5.2917" height="1.5346" fill="#c6e9af"/>
     <path x="4.6730042e-05" y="9.4191675" width="2.1695838" height="0.47624999" d="m4.673e-5 9.4192h2.1696v0.47625h-2.1696z" fill="#a00" sodipodi:type="rect"/>
     <path transform="rotate(90)" x="9.4191675" y="-2.5914078" width="1.3229166" height="0.47624999" d="m9.6806-2.5914h1.0615v0.47625h-1.3229v-0.21481a0.26144 0.26144 135 0 1 0.26144-0.26144z" fill="#a00" inkscape:path-effect="#path-effect1965-1" sodipodi:type="rect"/>
     <path x="5.291666" y="7.9522505" width="2.1695838" height="1.4140002" d="m5.2917 7.9523h2.1696v1.414h-2.1696z" fill="#faa" sodipodi:type="rect"/>
     <path transform="rotate(90)" x="7.9522505" y="-8.8899994" width="2.5250001" height="1.4816667" d="m8.2137-8.89h2.2636v1.4817h-2.525v-1.2202a0.26144 0.26144 135 0 1 0.26144-0.26144z" fill="#faa" inkscape:path-effect="#path-effect1965-1-8" sodipodi:type="rect"/>
    </svg>

    <hr class="my-4">

    <img class="img-fluid" src="chart.png">
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

  <script>
    $(".node").click(function() {
      let node = $(this);
      let name = node.data("name");

      $(".flow").addClass("opaque")

      $(".flow[data-to='" + name + "'], .flow[data-from='" + name + "']").removeClass("opaque").appendTo("svg")
    })
  </script>
</body>
</html>